{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminView=()=>{const[orders,setOrders]=useState([]);useEffect(()=>{fetchOrders();const interval=setInterval(fetchOrders,5000);return()=>clearInterval(interval);},[]);const fetchOrders=async()=>{try{const res=await axios.get(\"http://localhost:4000/orders\");console.log(\"Fetched orders:\",res.data);setOrders(res.data);}catch(err){console.error(\"Error fetching orders\",err);}};const updateOrderStatus=async(id,newStatus)=>{try{console.log(\"Updating order:\",id,\"‚Üí\",newStatus);// ‚úÖ Debug\nconst res=await axios.patch(\"http://localhost:4000/orders/\".concat(id),{status:newStatus});console.log(\"Updated order:\",res.data);alert(\"Order \".concat(id,\" has been \").concat(newStatus));fetchOrders();}catch(err){console.error(\"‚ùå Error updating order\",err);}};return/*#__PURE__*/_jsxs(\"div\",{style:{padding:20},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83E\\uDDFE Admin Dashboard \\u2013 Incoming Orders\"}),orders.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"\\u23F3 Loading or no orders found...\"}):orders.map(order=>/*#__PURE__*/_jsxs(\"div\",{style:{border:\"1px solid #ccc\",padding:15,marginBottom:15,borderRadius:5,backgroundColor:order.status===\"accepted\"?\"#e6ffed\":order.status===\"rejected\"?\"#ffe6e6\":\"#fff\"},children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Table #\",order.table]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Status:\"}),\" \",/*#__PURE__*/_jsx(\"span\",{style:{color:order.status===\"accepted\"?\"green\":order.status===\"rejected\"?\"red\":\"orange\"},children:order.status})]}),/*#__PURE__*/_jsx(\"ul\",{children:order.items.map((item,idx)=>/*#__PURE__*/_jsxs(\"li\",{children:[item.name,\" x \",item.qty]},idx))}),order.status===\"pending\"&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:10},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateOrderStatus(order.id,\"accepted\"),style:{marginRight:10},children:\"\\u2705 Accept\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateOrderStatus(order.id,\"rejected\"),style:{backgroundColor:\"crimson\",color:\"#fff\"},children:\"\\u274C Reject\"})]})]},order.id))]});};export default AdminView;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","AdminView","orders","setOrders","fetchOrders","interval","setInterval","clearInterval","res","get","console","log","data","err","error","updateOrderStatus","id","newStatus","patch","concat","status","alert","style","padding","children","length","map","order","border","marginBottom","borderRadius","backgroundColor","table","color","items","item","idx","name","qty","marginTop","onClick","marginRight"],"sources":["C:/Users/suram/food-ordering-app/src/pages/AdminView.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nconst AdminView = () => {\r\n  const [orders, setOrders] = useState([]);\r\n\r\n  useEffect(() => {\r\n    fetchOrders();\r\n    const interval = setInterval(fetchOrders, 5000);\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  const fetchOrders = async () => {\r\n    try {\r\n      const res = await axios.get(\"http://localhost:4000/orders\");\r\n      console.log(\"Fetched orders:\", res.data);\r\n      setOrders(res.data);\r\n    } catch (err) {\r\n      console.error(\"Error fetching orders\", err);\r\n    }\r\n  };\r\n\r\n  const updateOrderStatus = async (id, newStatus) => {\r\n  try {\r\n    console.log(\"Updating order:\", id, \"‚Üí\", newStatus); // ‚úÖ Debug\r\n    const res = await axios.patch(`http://localhost:4000/orders/${id}`, {\r\n      status: newStatus,\r\n    });\r\n    console.log(\"Updated order:\", res.data);\r\n    alert(`Order ${id} has been ${newStatus}`);\r\n    fetchOrders();\r\n  } catch (err) {\r\n    console.error(\"‚ùå Error updating order\", err);\r\n  }\r\n};\r\n\r\n\r\n  return (\r\n    <div style={{ padding: 20 }}>\r\n      <h2>üßæ Admin Dashboard ‚Äì Incoming Orders</h2>\r\n\r\n      {orders.length === 0 ? (\r\n        <p>‚è≥ Loading or no orders found...</p>\r\n      ) : (\r\n        orders.map((order) => (\r\n          <div\r\n            key={order.id}\r\n            style={{\r\n              border: \"1px solid #ccc\",\r\n              padding: 15,\r\n              marginBottom: 15,\r\n              borderRadius: 5,\r\n              backgroundColor:\r\n                order.status === \"accepted\"\r\n                  ? \"#e6ffed\"\r\n                  : order.status === \"rejected\"\r\n                  ? \"#ffe6e6\"\r\n                  : \"#fff\",\r\n            }}\r\n          >\r\n            <h3>Table #{order.table}</h3>\r\n            <p>\r\n              <strong>Status:</strong>{\" \"}\r\n              <span\r\n                style={{\r\n                  color:\r\n                    order.status === \"accepted\"\r\n                      ? \"green\"\r\n                      : order.status === \"rejected\"\r\n                      ? \"red\"\r\n                      : \"orange\",\r\n                }}\r\n              >\r\n                {order.status}\r\n              </span>\r\n            </p>\r\n            <ul>\r\n              {order.items.map((item, idx) => (\r\n                <li key={idx}>\r\n                  {item.name} x {item.qty}\r\n                </li>\r\n              ))}\r\n            </ul>\r\n            {order.status === \"pending\" && (\r\n              <div style={{ marginTop: 10 }}>\r\n                <button\r\n                  onClick={() => updateOrderStatus(order.id, \"accepted\")}\r\n                  style={{ marginRight: 10 }}\r\n                >\r\n                  ‚úÖ Accept\r\n                </button>\r\n                <button\r\n                  onClick={() => updateOrderStatus(order.id, \"rejected\")}\r\n                  style={{ backgroundColor: \"crimson\", color: \"#fff\" }}\r\n                >\r\n                  ‚ùå Reject\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        ))\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminView;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE1B,KAAM,CAAAC,SAAS,CAAGA,CAAA,GAAM,CACtB,KAAM,CAACC,MAAM,CAAEC,SAAS,CAAC,CAAGT,QAAQ,CAAC,EAAE,CAAC,CAExCC,SAAS,CAAC,IAAM,CACdS,WAAW,CAAC,CAAC,CACb,KAAM,CAAAC,QAAQ,CAAGC,WAAW,CAACF,WAAW,CAAE,IAAI,CAAC,CAC/C,MAAO,IAAMG,aAAa,CAACF,QAAQ,CAAC,CACtC,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAD,WAAW,CAAG,KAAAA,CAAA,GAAY,CAC9B,GAAI,CACF,KAAM,CAAAI,GAAG,CAAG,KAAM,CAAAZ,KAAK,CAACa,GAAG,CAAC,8BAA8B,CAAC,CAC3DC,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAEH,GAAG,CAACI,IAAI,CAAC,CACxCT,SAAS,CAACK,GAAG,CAACI,IAAI,CAAC,CACrB,CAAE,MAAOC,GAAG,CAAE,CACZH,OAAO,CAACI,KAAK,CAAC,uBAAuB,CAAED,GAAG,CAAC,CAC7C,CACF,CAAC,CAED,KAAM,CAAAE,iBAAiB,CAAG,KAAAA,CAAOC,EAAE,CAAEC,SAAS,GAAK,CACnD,GAAI,CACFP,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAEK,EAAE,CAAE,GAAG,CAAEC,SAAS,CAAC,CAAE;AACpD,KAAM,CAAAT,GAAG,CAAG,KAAM,CAAAZ,KAAK,CAACsB,KAAK,iCAAAC,MAAA,CAAiCH,EAAE,EAAI,CAClEI,MAAM,CAAEH,SACV,CAAC,CAAC,CACFP,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAEH,GAAG,CAACI,IAAI,CAAC,CACvCS,KAAK,UAAAF,MAAA,CAAUH,EAAE,eAAAG,MAAA,CAAaF,SAAS,CAAE,CAAC,CAC1Cb,WAAW,CAAC,CAAC,CACf,CAAE,MAAOS,GAAG,CAAE,CACZH,OAAO,CAACI,KAAK,CAAC,wBAAwB,CAAED,GAAG,CAAC,CAC9C,CACF,CAAC,CAGC,mBACEb,KAAA,QAAKsB,KAAK,CAAE,CAAEC,OAAO,CAAE,EAAG,CAAE,CAAAC,QAAA,eAC1B1B,IAAA,OAAA0B,QAAA,CAAI,qDAAoC,CAAI,CAAC,CAE5CtB,MAAM,CAACuB,MAAM,GAAK,CAAC,cAClB3B,IAAA,MAAA0B,QAAA,CAAG,sCAA+B,CAAG,CAAC,CAEtCtB,MAAM,CAACwB,GAAG,CAAEC,KAAK,eACf3B,KAAA,QAEEsB,KAAK,CAAE,CACLM,MAAM,CAAE,gBAAgB,CACxBL,OAAO,CAAE,EAAE,CACXM,YAAY,CAAE,EAAE,CAChBC,YAAY,CAAE,CAAC,CACfC,eAAe,CACbJ,KAAK,CAACP,MAAM,GAAK,UAAU,CACvB,SAAS,CACTO,KAAK,CAACP,MAAM,GAAK,UAAU,CAC3B,SAAS,CACT,MACR,CAAE,CAAAI,QAAA,eAEFxB,KAAA,OAAAwB,QAAA,EAAI,SAAO,CAACG,KAAK,CAACK,KAAK,EAAK,CAAC,cAC7BhC,KAAA,MAAAwB,QAAA,eACE1B,IAAA,WAAA0B,QAAA,CAAQ,SAAO,CAAQ,CAAC,CAAC,GAAG,cAC5B1B,IAAA,SACEwB,KAAK,CAAE,CACLW,KAAK,CACHN,KAAK,CAACP,MAAM,GAAK,UAAU,CACvB,OAAO,CACPO,KAAK,CAACP,MAAM,GAAK,UAAU,CAC3B,KAAK,CACL,QACR,CAAE,CAAAI,QAAA,CAEDG,KAAK,CAACP,MAAM,CACT,CAAC,EACN,CAAC,cACJtB,IAAA,OAAA0B,QAAA,CACGG,KAAK,CAACO,KAAK,CAACR,GAAG,CAAC,CAACS,IAAI,CAAEC,GAAG,gBACzBpC,KAAA,OAAAwB,QAAA,EACGW,IAAI,CAACE,IAAI,CAAC,KAAG,CAACF,IAAI,CAACG,GAAG,GADhBF,GAEL,CACL,CAAC,CACA,CAAC,CACJT,KAAK,CAACP,MAAM,GAAK,SAAS,eACzBpB,KAAA,QAAKsB,KAAK,CAAE,CAAEiB,SAAS,CAAE,EAAG,CAAE,CAAAf,QAAA,eAC5B1B,IAAA,WACE0C,OAAO,CAAEA,CAAA,GAAMzB,iBAAiB,CAACY,KAAK,CAACX,EAAE,CAAE,UAAU,CAAE,CACvDM,KAAK,CAAE,CAAEmB,WAAW,CAAE,EAAG,CAAE,CAAAjB,QAAA,CAC5B,eAED,CAAQ,CAAC,cACT1B,IAAA,WACE0C,OAAO,CAAEA,CAAA,GAAMzB,iBAAiB,CAACY,KAAK,CAACX,EAAE,CAAE,UAAU,CAAE,CACvDM,KAAK,CAAE,CAAES,eAAe,CAAE,SAAS,CAAEE,KAAK,CAAE,MAAO,CAAE,CAAAT,QAAA,CACtD,eAED,CAAQ,CAAC,EACN,CACN,GApDIG,KAAK,CAACX,EAqDR,CACN,CACF,EACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAAf,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}